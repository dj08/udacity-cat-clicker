<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Cat Clicker, Reloaded!</title>
    </head>
    <body>
      <script>
       document.write("<h1>" + document.title + "</h1>");
      </script>
      <div id="cat-list" style="height: 70%; max-height: 500px;">
        <!-- Javascript will populate this... -->
      </div>
    </body>
    <script>
     var cats = [{
       pic: "https://cdn.pixabay.com/photo/2015/02/09/15/55/cat-629821_960_720.jpg",
       clickCount: 0,
       name: "Kiki The Toy",
       // alt: "Some text"
       alt: (function() { return "The cutesy " + this.name +
              " shall appear here..." })()
     }, {
       pic: "https://dianakhayyat.files.wordpress.com/2011/05/animals_cats_small_cat_005241_.jpg",
       clickCount: 0,
       name: "Kuku The Hypnotizer",
       // alt: "Some text"
       alt: "The mighty " + this.name + " shall appear here..."
     }];

     var insertCatsHere = document.getElementById('cat-list');
     cats.forEach(function (thisCat, index) {
       var catFig=document.createElement("figure");
       catFig.setAttribute("id", "catfig-"+index);
       insertCatsHere.appendChild(catFig);

       var cat=document.createElement("img");
       cat.setAttribute("src", thisCat.pic);
       cat.setAttribute("id", "cat-"+index);
       cat.setAttribute("alt", thisCat.alt);
       catFig.appendChild(cat);

       var catCaption=document.createElement("figcaption");
       var catCaptionText=document.createTextNode(thisCat.name);
       catCaption.appendChild(catCaptionText);
       catFig.appendChild(catCaption);

       var countGadgetParagraph=document.createElement("p");
       countGadgetParagraph.setAttribute("id", 'count-gadget-'+index);
       insertCatsHere.appendChild(countGadgetParagraph);
       
       document.getElementById('cat-' + index).addEventListener('click',
         (function(indexCopy) {
            return function() {
              document.getElementById("count-gadget-" + indexCopy ).textContent =
                "You clicked " + cats[indexCopy].name + " " + ++cats[indexCopy].clickCount
                + " time(s)";
            };})(index), false);
       }
     );
    </script>
</html>
